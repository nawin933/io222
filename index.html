<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ระบบสั่งอาหาร Grab Style</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Prompt', sans-serif;
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png'), linear-gradient(to bottom right, #fff3e0, #ffe0b2);
      animation: bgFade 10s infinite alternate;
    }
    @keyframes bgFade {
      0% { background-position: left top; }
      100% { background-position: right bottom; }
    }
    header {
      background: linear-gradient(to right, #00c853, #64dd17);
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 2.2rem;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      border-bottom: 4px solid #00bfa5;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .container {
      max-width: 720px;
      margin: auto;
      padding: 1rem;
    }
    h2 {
      color: #2e7d32;
      border-left: 5px solid #76ff03;
      padding-left: 10px;
      margin-top: 2rem;
      animation: slideIn 0.5s ease-out;
    }
    @keyframes slideIn {
      from { transform: translateX(-50px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    select,
    input[type="number"],
    input[type="text"],
    input[type="radio"] {
      width: 100%;
      padding: 0.6rem;
      margin: 0.5rem 0;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1rem;
      background: #e8f5e9;
      transition: border 0.3s;
    }
    select:focus, input:focus {
      outline: none;
      border-color: #00c853;
    }
    .btn {
      display: inline-block;
      margin: 0.5rem 0.2rem;
      padding: 0.7rem 1.4rem;
      background: linear-gradient(to right, #00e676, #00c853);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn:hover {
      transform: scale(1.06);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
    }
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 15px;
      margin: 1rem 0;
    }
    .menu-card {
      background: white;
      padding: 0.7rem;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      transform: scale(1);
      animation: popIn 0.4s ease;
    }
    .menu-card:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
    }
    @keyframes popIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .menu-card p {
      font-weight: bold;
      margin-top: 0.5rem;
      font-size: 1rem;
      color: #2e7d32;
    }
    .menu-card img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 0.3rem;
      background: #eee;
      border: 1px solid #eee;
    }
    .bill {
      background: #f1f8e9;
      padding: 1.2rem;
      margin-top: 1.5rem;
      border-radius: 12px;
      box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.08);
      border-left: 4px solid #aed581;
      animation: fadeIn 0.5s;
    }
    .bill h3 {
      margin-top: 0;
      color: #2e7d32;
    }
    .bill ul {
      padding-left: 1.2rem;
    }
    .topping-section {
      margin-top: 1rem;
      background: #dcedc8;
      padding: 1rem;
      border-radius: 10px;
      border-left: 4px solid #c5e1a5;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }
    .hidden {
      display: none;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Egg menu popup style (reuse topping-section style) */
    #eggMenuSection {
      margin-top: 1rem;
      background: #fffde7;
      border-left: 4px solid #ffe082;
    }
    @media (max-width: 480px) {
      .menu-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      header {
        font-size: 1.5rem;
      }
      .btn {
        width: 100%;
        margin-top: 1rem;
      }
      .container {
        padding: 1rem 0.7rem;
      }
    }
  </style>
</head>
<body>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
  <header>ระบบสั่งอาหารในร้านเย็นตาโฟyammy</header>
  <div class="container">
    <label for="table">เลือกโต๊ะ:</label>
    <select id="table">
      <option value="">-- เลือกโต๊ะ --</option>
      <option value="1">โต๊ะ 1</option>
      <option value="2">โต๊ะ 2</option>
      <option value="3">โต๊ะ 3</option>
      <option value="4">โต๊ะ 4</option>
      <option value="5">โต๊ะ 5</option>
      <option value="6">โต๊ะ 6</option>
      <option value="7">โต๊ะ 7</option>
    </select>
    <h2>หมวดหมู่</h2>
    <div class="menu-grid" id="categoryList">
      <div class="menu-card" onclick="showMenu('rice')">
        <p>เมนูข้าว</p>
      </div>
      <div class="menu-card" onclick="showMenu('noodle')">
        <p>ก๋วยเตี๋ยว</p>
      </div>
      <div class="menu-card" onclick="showMenu('drink')">
        <p>เครื่องดื่ม</p>
      </div>
      <div class="menu-card" onclick="showMenu('fried')">
        <p>ของทอด</p>
      </div>
    </div>
    <div id="menuSection" class="hidden">
      <h2 id="menuTitle"></h2>
      <div class="menu-grid" id="menuItems"></div>
    </div>
    <div class="topping-section hidden" id="toppingSection">
      <h3>ตัวเลือกเพิ่มเติม</h3>
      <div id="toppingOptions"></div>
      <button class="btn" onclick="addToBill()">เพิ่มในบิล</button>
    </div>
    <!-- Egg menu popup -->
    <div class="topping-section hidden" id="eggMenuSection">
      <h3>เลือกเมนูไข่</h3>
      <div class="menu-grid" id="eggMenuItems"></div>
    </div>
    <!-- Bill section now includes the form -->
    <div class="bill" id="billSection">
      <h3>บิลโต๊ะ <span id="currentTable">-</span></h3>
      <ul id="billList"></ul>
      <strong>รวมทั้งหมด: <span id="totalPrice">0</span> บาท</strong>
      <br>
      <!-- Form for sending bill -->
      <form id="sendBillForm" action="https://formsubmit.co/seya8772@gmail.com" method="POST" target="_blank">
        <input type="hidden" name="_subject" value="บิลสั่งอาหารโต๊ะจากระบบ Grab Style">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="bill_detail" id="bill_detail">
        <button class="btn" type="submit" id="sendBillBtn">ส่งบิล</button>
      </form>
    </div>
  </div>
  <script>
    const eggMenu = [
      { name: "ไข่ดาว", price: 10, img: "https://i.postimg.cc/Pf9Tkz4Y/image.jpg" },
      { name: "ไข่ต้มยางมะตูม", price: 10, img: "https://i.postimg.cc/jdM652DH/image.jpg" },
      { name: "ไข่เจียว", price: 30, img: "https://i.postimg.cc/yNPbYsC2/image.jpg" }
    ];
    const menuData = {
      rice: [
        { name: "ข้าวเปล่า", price: 10, img: "https://i.postimg.cc/QtrzJjSS/image.jpg" },
        { name: "ข้าวต้มปลา", price: 50, img: "https://i.postimg.cc/Wzy6SnTj/image.jpg" },
        { name: "ข้าวต้มกุ้ง", price: 50, img: "https://i.postimg.cc/Nj6mrY9Q/image.jpg" },
        { name: "ข้าวต้มหมึก", price: 50, img: "https://i.postimg.cc/65RYzk2m/image.jpg" },
        { name: "ข้าวต้มรวม", price: 60, img: "https://i.postimg.cc/Kc3Nv6N8/images.jpg" },
        { name: "ข้าวผัดปู", price: 60, img: "https://i.postimg.cc/W15r78ny/image.jpg" },
        { name: "ข้าวผัดหมึก", price: 60, img: "https://i.postimg.cc/J0Qtz7YF/image.jpg" },
        { name: "ข้าวผัดกุ้ง", price: 60, img: "https://i.postimg.cc/QCjxwGNJ/image.jpg" },
        { name: "ข้าวผัดทะเล", price: 80, img: "https://i.postimg.cc/ZqBX4h8m/image.jpg" },
        { name: "ข้าวไก่กระเทียม", price: 50, img: "https://i.postimg.cc/FRPSZw6f/image.jpg" },
        { name: "ข้าวเนื้อกระเทียม", price: 60, img: "https://i.postimg.cc/ZY80FWWG/image.jpg" },
        { name: "ต้มยำทะเล", price: 70, spicy: true, img: "https://i.postimg.cc/Jh0PjwKF/image.jpg" },
        { name: "กะเพราไก่", price: 50, riceOrSide: true, addEgg: true, img: "https://i.postimg.cc/Nj5H4gqR/image.jpg" },
        { name: "กะเพราเนื้อ", price: 60, riceOrSide: true, addEgg: true, img: "https://i.postimg.cc/L4G5pjrg/image.jpg" },
        { name: "กระเพราทะเล", price: 60, riceOrSide: true, addEgg: true, img: "https://i.postimg.cc/d3GYvZyG/image.jpg" }
      ],
      noodle: [
        { name: "ก๋วยเตี๋ยวน้ำใส", price: 50, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/tgNfzKST/image.jpg" },
        { name: "ก๋วยเตี๋ยวเย็นตาโฟ", price: 50, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/qvLScfZ7/image.jpg" },
        { name: "ก๋วยเตี๋ยวต้มยำ", price: 50, type: ["ธรรมดา", "พิเศษ"], spicy: true, noodleType: true, img: "https://i.postimg.cc/2S6Mx9pF/image.jpg" },
        { name: "ก๋วยเตี๋ยวเย็นตาโฟต้มยำ", price: 50, type: ["ธรรมดา", "พิเศษ"], spicy: true, noodleType: true, img: "https://i.postimg.cc/xTqXVYMw/image.jpg" },
        { name: "ก๋วยเตี๋ยวทะเล", price: 60, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/nM8KQztP/image.jpg" },
        { name: "บะหมี่เกี๊ยว", price: 50, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/xCDbRZZX/image.jpg" },
        { name: "เกี๊ยวน้ำ", price: 50, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/mZ6TW9bw/image.jpg" },
        { name: "เส้นปลาน้ำใส", price: 60, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/pTzcGgX4/image.jpg" },
        { name: "เกาเหลา", price: 60, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/cLN0Vpxy/image.jpg" },
        { name: "เกาเหลาเนื้อปลา", price: 60, type: ["ธรรมดา", "พิเศษ"], noodleType: true, img: "https://i.postimg.cc/QCFzX6Xt/2.jpg" },
        { name: "สุกี้น้ำ", chickenOrSeafood: true, img: "https://i.postimg.cc/MZjf4zwv/image.jpg" },
        { name: "สุุกี้แห้ง", chickenOrSeafood: true, img: "https://i.postimg.cc/K89YjWb6/image.webp" }
      ],
      drink: [
        { name: "น้ำโค้ก", price: 15, img: "https://i.postimg.cc/FKQfpXqW/image.jpg" },
        { name: "น้ำแฟนต้า", price: 15, img: "https://i.postimg.cc/wvw79yBZ/image.jpg" },
        { name: "นมชมพู", price: 25, img: "https://i.postimg.cc/KvMvHstd/image.jpg" },
        { name: "ชาไทยขวด", price: 25, img: "https://i.postimg.cc/HLxLBWzt/image.jpg" },
        { name: "โกโก้ขวด", price: 25, img: "https://i.postimg.cc/TPrtNGPp/image.jpg" },
        { name: "น้ำเปล่า", price: 10, img: "https://i.postimg.cc/504SPCGR/image.jpg" },
        { name: "ชาเขียว", price: 25, img: "https://i.postimg.cc/wxt0nhMC/image.jpg" }
      ],
      fried: [
        { name: "ลูกชิ้น", price: 10, isQty: true, img: "https://i.postimg.cc/6pYZWppk/image.jpg" },
        { name: "เนื้อทอด", price: 60, size: ["จานเล็ก", "จานใหญ่"], prices: { "จานเล็ก": 60, "จานใหญ่": 100 }, img: "https://i.postimg.cc/DySQSFLR/image.jpg" },
        { name: "ปลากะพงลวกจิ้ม", price: 120, img: "https://i.postimg.cc/XqQ248MF/image.jpg" },
        { name: "ลูกชิ้นรวมลวกจิ้ม", price: 70, size: ["เล็ก", "ใหญ่"], prices: { "เล็ก": 70, "ใหญ่": 90 }, img: "https://i.postimg.cc/c1w00t5z/image.jpg" },
        { name: "ทาโกะยากิ", price: 5, takoyaki: true, img: "https://i.postimg.cc/TwnhW7C8/image.jpg" },
        // ปุ่มไข่ใหม่ (ไม่มีรูปไข่)
        { name: "ไข่", isEggMenu: true }
      ]
    };
    const noodleTypeList = [
      "เส้นใหญ่", "เส้นเล็ก", "หมี่ขาว", "บะหมี่", "วุ้นเส้น"
    ];
    let currentCategory = "";
    let selectedItem = null;
    const bill = {};
    function showMenu(category) {
      currentCategory = category;
      document.getElementById("menuTitle").textContent = {
        rice: "เมนูข้าว",
        noodle: "ก๋วยเตี๋ยว",
        drink: "เครื่องดื่ม",
        fried: "ของทอด"
      }[category];
      const items = menuData[category];
      const menuHTML = items.map((item, index) => `
        <div class="menu-card" onclick="selectItem(${index})">
          ${item.img && !item.isEggMenu ? `<img src="${item.img}" alt="food" />` : ""}
          <p>${item.name}${item.price && !item.isEggMenu ? `<br><small>${item.price} บาท</small>` : ""}</p>
        </div>
      `).join("");
      document.getElementById("menuItems").innerHTML = menuHTML;
      document.getElementById("menuSection").classList.remove("hidden");
      document.getElementById("toppingSection").classList.add("hidden");
      document.getElementById("eggMenuSection").classList.add("hidden");
    }
    function selectItem(index) {
      const item = menuData[currentCategory][index];
      // ถ้าเป็นปุ่มไข่ ให้แสดง Egg Menu
      if (currentCategory === "fried" && item.isEggMenu) {
        showEggMenu();
        return;
      }
      selectedItem = item;
      document.getElementById("toppingOptions").innerHTML = "";
      const toppingHTML = [];
      if (currentCategory === "noodle" && item.noodleType) {
        toppingHTML.push(`
          <label>เลือกเส้น:</label>
          <select id="noodleSelectType">
            ${noodleTypeList.map(t => `<option value="${t}">${t}</option>`).join("")}
          </select>
        `);
      }
      if (currentCategory === "fried") {
        if (item.isQty) {
          toppingHTML.push(`
            <label>จำนวนไม้:</label>
            <input type="number" id="qty" value="1" min="1" max="50">
          `);
        }
        if (item.size) {
          toppingHTML.push(`
            <label>ขนาด:</label>
            <select id="friedSize">
              ${item.size.map(size => `<option value="${size}">${size}</option>`).join("")}
            </select>
          `);
        }
        if (item.takoyaki) {
          toppingHTML.push(`
            <label>จำนวนลูก:</label>
            <input type="number" id="takoyakiQty" value="1" min="1" max="50">
            <small>ซื้อ 10 ลูกแถม 1, 6 ลูก 30 บาท, 11 ลูก 50 บาท</small>
          `);
        }
      }
      if (item.riceOrSide) {
        toppingHTML.push(`
          <label>รูปแบบ:</label>
          <select id="riceOrSide">
            <option value="ราดข้าว">ราดข้าว</option>
            <option value="กับข้าว">กับข้าว</option>
          </select>
        `);
      }
      if (item.addEgg) {
        toppingHTML.push(`
          <label><input type="checkbox" id="addEgg" /> เพิ่มไข่ดาว (+10 บาท)</label>
        `);
      }
      if (item.type) {
        toppingHTML.push(`
          <label>ประเภท:</label>
          <select id="noodleType">
            ${item.type.map(t => `<option value="${t}">${t}</option>`).join("")}
          </select>
        `);
      }
      if (item.spicy) {
        toppingHTML.push(`
          <label>ระดับความเผ็ด:</label>
          <select id="spicyLevel">
            <option value="ไม่เผ็ด">ไม่เผ็ด</option>
            <option value="เผ็ดน้อย">เผ็ดน้อย</option>
            <option value="เผ็ดกลาง">เผ็ดกลาง</option>
            <option value="เผ็ดมาก">เผ็ดมาก</option>
          </select>
        `);
      }
      if (item.chickenOrSeafood) {
        toppingHTML.push(`
          <label>เลือก ไก่/ทะเล:</label>
          <select id="sukiyakiType">
            <option value="ไก่">ไก่ (60 บาท)</option>
            <option value="ทะเล">ทะเล (70 บาท)</option>
          </select>
        `);
      }
      document.getElementById("toppingOptions").innerHTML = toppingHTML.join("<br>");
      document.getElementById("toppingSection").classList.remove("hidden");
      document.getElementById("eggMenuSection").classList.add("hidden");
    }
    function showEggMenu() {
      document.getElementById("toppingSection").classList.add("hidden");
      document.getElementById("eggMenuSection").classList.remove("hidden");
      document.getElementById("eggMenuItems").innerHTML = eggMenu.map((egg, idx) => `
        <div class="menu-card" onclick="selectEggItem(${idx})">
          <img src="${egg.img}" alt="${egg.name}" />
          <p>${egg.name}<br><small>${egg.price} บาท</small></p>
        </div>
      `).join("");
    }
    function selectEggItem(idx) {
      selectedItem = eggMenu[idx];
      addToBill();
      document.getElementById("eggMenuSection").classList.add("hidden");
    }
    function addToBill() {
      const table = document.getElementById("table").value;
      if (!table) {
        alert("กรุณาเลือกโต๊ะก่อน");
        return;
      }
      let description = selectedItem.name;
      let price = selectedItem.price || 0;
      if (currentCategory === "noodle" && selectedItem.noodleType) {
        const noodleSelectType = document.getElementById("noodleSelectType")?.value;
        if (noodleSelectType) description += ` (${noodleSelectType})`;
      }
      if (currentCategory === "fried") {
        if (selectedItem.isQty) {
          const qty = parseInt(document.getElementById("qty").value) || 1;
          description += ` (${qty} ไม้)`;
          price = selectedItem.price * qty;
        }
        if (selectedItem.size) {
          const size = document.getElementById("friedSize").value;
          description += ` (${size})`;
          price = selectedItem.prices[size];
        }
        if (selectedItem.takoyaki) {
          const qty = parseInt(document.getElementById("takoyakiQty").value) || 1;
          description += ` (${qty} ลูก)`;
          if (qty >= 11) {
            price = 50;
            description += " (โปร 11 ลูก 50 บาท)";
          } else if (qty >= 10) {
            price = selectedItem.price * 10;
            description += " (โปร 10 ลูกแถม 1)";
          } else if (qty >= 6) {
            price = 30;
            description += " (โปร 6 ลูก 30 บาท)";
          } else {
            price = selectedItem.price * qty;
          }
        }
      }
      if (selectedItem.type && currentCategory === "noodle") {
        const noodleType = document.getElementById("noodleType")?.value;
        if (noodleType) {
          description += ` (${noodleType})`;
          if (noodleType === "พิเศษ") {
            price += 10;
          }
        }
      }
      if (selectedItem.riceOrSide) {
        const type = document.getElementById("riceOrSide")?.value;
        if (type) description += ` (${type})`;
      }
      if (selectedItem.addEgg && document.getElementById("addEgg")?.checked) {
        description += " +ไข่ดาว";
        price += 10;
      }
      if (selectedItem.spicy) {
        const spicy = document.getElementById("spicyLevel")?.value;
        if (spicy) description += ` (${spicy})`;
      }
      if (selectedItem.chickenOrSeafood) {
        const sukiyakiType = document.getElementById("sukiyakiType")?.value;
        if (sukiyakiType) {
          description += ` (${sukiyakiType})`;
          price = sukiyakiType === "ไก่" ? 60 : 70;
        }
      }
      // สำหรับเมนูไข่ที่อยู่ใน eggMenu (เลือกผ่าน eggMenuSection)
      if (!bill[table]) bill[table] = [];
      bill[table].push({ description, price });
      updateBill();
      document.getElementById("toppingSection").classList.add("hidden");
      document.getElementById("eggMenuSection").classList.add("hidden");
    }
    function updateBill() {
      const table = document.getElementById("table").value;
      document.getElementById("currentTable").textContent = table || "-";
      const list = bill[table] || [];
      document.getElementById("billList").innerHTML = list.map((item, index) =>
        `<li>${item.description} - ${item.price} บาท 
           <button onclick="removeItem(${index})" style="margin-left:10px;color:#fff;background:#f44336;border:none;padding:3px 8px;border-radius:5px;cursor:pointer;">ลบ</button>
        </li>`).join("");
      const total = list.reduce((sum, item) => sum + item.price, 0);
      document.getElementById("totalPrice").textContent = total;
      // Update form hidden field for sending
      let billText = `บิลของโต๊ะ ${table}:\n`;
      list.forEach((item, idx) => {
        billText += `${idx+1}. ${item.description} - ${item.price} บาท\n`;
      });
      billText += `รวมทั้งหมด: ${total} บาท`;
      document.getElementById("bill_detail").value = billText;
    }
    function removeItem(index) {
      const table = document.getElementById("table").value;
      if (!table || !bill[table]) return;
      bill[table].splice(index, 1);
      updateBill();
    }
    document.getElementById("sendBillForm").addEventListener("submit", function(e) {
      const table = document.getElementById("table").value;
      if (!table || !bill[table] || bill[table].length === 0) {
        alert("กรุณาเลือกโต๊ะและเพิ่มรายการก่อนส่งบิล");
        e.preventDefault();
        return false;
      }
    });
  </script>
</body>
</html>
